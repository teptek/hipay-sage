{"version":3,"sources":["../assets/scripts/multipleFilterMasonry.js"],"names":["$","fn","multipleFilterMasonry","options","cache","filters","selectorType","filtersGroupSelector","children","each","push","this","data","init","$container","find","itemSelector","masonry","filterItems","selector","result","item","index","sel","is","inArray","reload","items","empty","append","hashFilter","hash","window","location","replace","proc","change","val","length","procUL","click","removeClass","addClass","$$","jQuery"],"mappings":"CAAA,SAAAA,GACA,YACAA,GAAAC,GAAAC,sBAAA,SAAAC,GACA,GAAAC,MACAC,IAEA,UAAAF,EAAAG,cACAN,EAAAG,EAAAI,sBAAAC,WAAAC,KAAA,WACAJ,EAAAK,KAAAV,EAAAW,MAAAC,KAAA,YAKA,IAAAC,GAAA,SAAAC,GACAA,EAAAC,KAAAZ,EAAAa,cAAAP,KAAA,WACAL,EAAAM,KAAAV,EAAAW,SAEAG,EAAAG,QAAAd,IAIAe,EAAA,SAAAC,GACA,GAAAC,KAQA,OAPApB,GAAAI,GAAAK,KAAA,SAAAY,GACArB,EAAAmB,GAAAV,KAAA,SAAAa,EAAAC,GACAnB,EAAAiB,GAAAG,GAAAD,IACAvB,EAAAyB,QAAArB,EAAAiB,GAAAD,SAAAA,EAAAV,KAAAN,EAAAiB,QAIAD,GAIAM,EAAA,SAAAZ,EAAAa,GACAb,EAAAc,QACA5B,EAAA2B,GAAAlB,KAAA,WACAT,EAAAc,GAAAe,OAAA7B,EAAAW,SAEAG,EAAAG,QAAA,eACAH,EAAAG,WAIAa,EAAA,SAAAhB,GACA,GAAAiB,GAAAC,OAAAC,SAAAF,KAAAG,QAAA,IAAA,GACAlC,GAAAyB,QAAAM,EAAA1B,SACAqB,EAAAZ,EAAAd,EAAA,IAAA+B,KAIAI,EAAA,SAAArB,GACAd,EAAAG,EAAAI,sBAAAQ,KAAA,wBAAAN,KAAA,WACAT,EAAAW,MAAAyB,OAAA,WACA,GAAAjB,KACAnB,GAAAG,EAAAI,sBAAAQ,KAAA,wBAAAN,KAAA,WACAT,EAAAW,MAAAa,GAAA,aACAL,EAAAT,KAAA,IAAAV,EAAAW,MAAA0B,QAGA,IAAAV,GAAAvB,CACAe,GAAAmB,OAAA,IACAX,EAAAT,EAAAC,IAEAO,EAAAZ,EAAAa,QAKAY,EAAA,SAAAzB,GACAd,EAAAG,EAAAI,sBAAAC,WAAAC,KAAA,WACAT,EAAAW,MAAA6B,MAAA,WACAxC,EAAAG,EAAAI,sBAAAC,WAAAiC,YAAA,UACAT,OAAAC,SAAAF,KAAA/B,EAAAW,MAAAC,KAAA,SACA,IAAAO,KACAA,GAAAT,KAAA,IAAAV,EAAAW,MAAAC,KAAA,WACAZ,EAAAW,MAAA+B,SAAA,SACA,IAAAf,GAAAvB,CACAe,GAAAmB,OAAA,IACAX,EAAAT,EAAAC,IAEAO,EAAAZ,EAAAa,OAIAG,EAAAhB,GACAd,EAAAG,EAAAI,sBAAAC,WAAAiC,YAAA,UACAzC,EAAA,2BAAAgC,OAAAC,SAAAF,KAAAG,QAAA,IAAA,IAAA,KAAAQ,SAAA,UAGA,OAAA/B,MAAAF,KAAA,WACA,GAAAkC,GAAA3C,EAAAW,KACAE,GAAA8B,GACA,SAAAxC,EAAAG,aAAAiC,EAAAI,GAAAR,EAAAQ,OAGAX,OAAAY","file":"multipleFilterMasonry.js","sourcesContent":["(function($){\n  'use strict';\n  $.fn.multipleFilterMasonry = function(options){\n    var cache=[];\n    var filters = [];\n\n    if(options.selectorType === 'list') {\n      $(options.filtersGroupSelector).children().each(function() {\n        filters.push($(this).data('filter'));\n      });\n    }\n\n    //the main job of the function is to cache the item,because we are going to filter the items later\n    var init = function($container){\n      $container.find(options.itemSelector).each(function(){\n        cache.push($(this));\n      });\n      $container.masonry(options);\n    };\n\n    //filter items in cache\n    var filterItems = function(selector){\n      var result=[];\n      $(cache).each(function(item){\n        $(selector).each(function(index,sel) {\n          if(cache[item].is(sel)){\n            if($.inArray(cache[item], result) === -1) result.push(cache[item]);\n          }\n        });\n      });\n      return result;\n    };\n\n    //reload masonry\n    var reload = function($container,items){\n      $container.empty();\n      $(items).each(function(){\n        $($container).append($(this));\n      });\n      $container.masonry('reloadItems');\n      $container.masonry();\n    };\n\n    // Hash filter\n    var hashFilter = function($container) {\n      var hash = window.location.hash.replace(\"#\", \"\");\n      if($.inArray(hash, filters) !== -1) {\n        reload($container, $('.' + hash));\n      }\n    }\n\n    var proc = function($container){\n      $(options.filtersGroupSelector).find('input[type=checkbox]').each(function(){\n        $(this).change(function(){\n          var selector = [];\n          $(options.filtersGroupSelector).find('input[type=checkbox]').each( function() {\n            if ( $(this).is(':checked') ) {\n              selector.push( '.' + $(this).val() );\n            }\n          });\n          var items = cache;\n          if (selector.length > 0) {\n            items = filterItems(selector);\n          }\n          reload($container,items);\n        });\n      });\n    };\n\n    var procUL = function($container){\n      $(options.filtersGroupSelector).children().each(function(){\n        $(this).click(function(){\n          $(options.filtersGroupSelector).children().removeClass('active');\n          window.location.hash = $(this).data('filter');\n          var selector = [];\n          selector.push( '.' + $(this).data('filter') );\n          $(this).addClass('active');\n          var items = cache;\n          if (selector.length > 0) {\n            items = filterItems(selector);\n          }\n          reload($container,items);\n        });\n      });\n\n      hashFilter($container);\n      $(options.filtersGroupSelector).children().removeClass('active');\n      $('.filters li[data-filter='+window.location.hash.replace(\"#\", \"\")+']').addClass('active');\n    };\n\n    return this.each(function() {\n      var $$ = $(this);\n      init($$);\n      options.selectorType === 'list' ? procUL($$) : proc($$);\n    });\n  };\n}(window.jQuery));\n"],"sourceRoot":"assets/scripts/"}